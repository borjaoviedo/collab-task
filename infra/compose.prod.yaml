services:
  api:
    environment:
      ASPNETCORE_ENVIRONMENT: Production
      DOTNET_ENVIRONMENT: Production
      Jwt__Key: "${JWT_KEY}"
      Jwt__Issuer: "collabtask"
      Jwt__Audience: "collabtask"
    # Demo: expose API directly on host 8080. In real prod use a reverse proxy (80/443)
    ports: ["8080:8080"]
    profiles: ["prod"]

  sql:
    # Database is not exposed in prod; only accessible through the internal Docker network
    profiles: ["prod"]